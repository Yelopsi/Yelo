<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrador - Jano</title>
    
    <link rel="stylesheet" href="/style.css?v=1.3">
    <link rel="stylesheet" href="/admin/admin.css?v=1.3">
    <link rel="icon" href="/assets/images/favicon.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="pagina-dashboard">

    <div class="dashboard-container">
        <aside class="dashboard-sidebar ruido">
            <div class="sidebar-header">
                <a href="/index.html" class="sidebar-logo">
                    <img src="/assets/logos/logo_duplo_branco.png" alt="Logo Jano">
                </a>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="active" data-page="admin_visao_geral.html"><a href="#">Visão Geral</a></li>
                    <li data-page="admin_caixa_entrada.html"><a href="#">Mensagens</a></li>
                    <li data-page="admin_avaliacoes.html"><a href="#">Avaliações</a></li>
                    <li data-page="admin_avaliacoes_psi.html"><a href="#">Avaliações (Psis)</a></li>
                    <li data-page="admin_gerenciar_psicologos.html"><a href="#">Gerenciar Psicólogos</a></li>
                    <li data-page="admin_lista_espera.html"><a href="#">Lista de Espera</a></li>
                    <li data-page="admin_gerenciar_pacientes.html"><a href="#">Gerenciar Pacientes</a></li>
                    <li data-page="admin_financeiro.html"><a href="#">Financeiro</a></li>
                    <li data-page="admin_gestao_conteudo.html"><a href="#">Gestão de Conteúdo</a></li>
                    <li data-page="admin_comunidade_gestao.html"><a href="#">Gestão da Comunidade</a></li>
                    <li data-page="admin_minha_conta.html"><a href="#">Minha Conta</a></li>
                    <li data-page="admin_configuracoes.html"><a href="#">Configurações</a></li>
                    <li data-page="admin_logs_sistema.html"><a href="#">Logs do Sistema</a></li>
                </ul>
                <button class="nav-btn" data-target="relatorios">
                    <span class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="20" x2="18" y2="10"></line>
                            <line x1="12" y1="20" x2="12" y2="4"></line>
                            <line x1="6" y1="20" x2="6" y2="14"></line>
                        </svg>
                    </span>
                    Relatórios
                </button>
            </nav>
            
            <div class="sidebar-footer">
                <p class="nome-admin">Anderson Costa</p>
                <a href="#" class="btn-sair">Sair</a>
            </div>
        </aside>

        <main class="dashboard-main">
    <header class="main-header">
        <div class="header-content">
            
            <button class="btn-toggle-sidebar" id="toggleSidebar">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="titulo-pagina">
                <h1 id="pageTitle"></h1>
                <p id="pageSubtitle"></p>
            </div>
        </div>
    </header>

    <div id="main-content">
        </div>

    <section id="relatorios" class="content-section" style="display: none;">
        <div class="header-flex">
            <h1>Relatórios de Performance</h1>
            <div class="date-filter">
                <input type="date" id="report-start" aria-label="Data Inicial">
                <span>até</span>
                <input type="date" id="report-end" aria-label="Data Final">
                <button onclick="loadReports()" class="btn-filter">Filtrar Resultados</button>
            </div>
        </div>

        <div class="kpi-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
            
            <div class="kpi-card" style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                <h4 style="font-size: 0.85rem; color: #666; margin-bottom: 5px;">Acessos ao Site</h4>
                <span id="kpi-visits" style="font-size: 1.6rem; font-weight: bold; color: #2c3e50;">0</span>
            </div>

            <div class="kpi-card" style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #f39c12; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                <h4 style="font-size: 0.85rem; color: #666; margin-bottom: 5px;">Perguntas Feitas</h4>
                <span id="kpi-questions" style="font-size: 1.6rem; font-weight: bold; color: #2c3e50;">0</span>
            </div>

            <div class="kpi-card" style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #27ae60; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                <h4 style="font-size: 0.85rem; color: #666; margin-bottom: 5px;">Respondidas</h4>
                <span id="kpi-answered" style="font-size: 1.6rem; font-weight: bold; color: #2c3e50;">0</span>
            </div>

            <div class="kpi-card" style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #8e44ad; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                <h4 style="font-size: 0.85rem; color: #666; margin-bottom: 5px;">Respostas de Psis</h4>
                <span id="kpi-answers-total" style="font-size: 1.6rem; font-weight: bold; color: #2c3e50;">0</span>
            </div>

            <div class="kpi-card" style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #e74c3c; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                <h4 style="font-size: 0.85rem; color: #666; margin-bottom: 5px;">Posts no Blog</h4>
                <span id="kpi-blog" style="font-size: 1.6rem; font-weight: bold; color: #2c3e50;">0</span>
            </div>
        </div>

        <div class="charts-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">
            <div class="chart-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                <h3>Tráfego vs Novos Usuários</h3>
                <canvas id="chartUsers"></canvas>
            </div>
            <div class="chart-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                <h3>Funil do Questionário</h3>
                <canvas id="chartDemand"></canvas>
            </div>
            <div class="chart-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                <h3>Horários de Pico (Questionários)</h3>
                <div style="height: 250px; display: flex; justify-content: center;">
                    <canvas id="chartTime"></canvas>
                </div>
            </div>
            <div class="chart-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                <h3>Planos Ativos</h3>
                <div style="height: 250px; display: flex; justify-content: center;">
                    <canvas id="chartPlans"></canvas>
                </div>
            </div>
        </div>
    </section>
</main>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="/config.js?v=1.3"></script>
    <script src="/admin/admin.js?v=1.3"></script>
    
    <div id="confirmation-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
    <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 500px; position: relative; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 id="modal-title" style="margin-top: 0; color: #1B4332;">Confirmação</h3>
        <div id="modal-body" style="margin: 20px 0; color: #555;"></div>
        <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 25px;">
            <button id="modal-cancel-btn" style="padding: 10px 20px; border: 1px solid #ccc; background: white; border-radius: 5px; cursor: pointer;">Cancelar</button>
            <button id="modal-confirm-btn" style="padding: 10px 20px; background: #1B4332; color: white; border: none; border-radius: 5px; cursor: pointer;">Confirmar</button>
        </div>
    </div>
</div>

<style>
    #confirmation-modal[aria-hidden="false"] {
        display: flex !important;
    }
</style>
</body>
</html>