<div class="main-header" style="padding: 25px 40px;">
    <div class="header-content">
        <h1>Meu Perfil</h1>
        <p>Gerencie suas informa√ß√µes pessoais e profissionais.</p>
    </div>
    <a href="#" id="btn-view-public-profile" class="btn btn-secundario" target="_blank" style="opacity: 0; pointer-events: none; transition: opacity 0.3s;">
        Ver como Paciente
    </a>
</div>

<div class="widget">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 style="margin:0;">Informa√ß√µes do Perfil</h3>
        <span id="form-mode-indicator" class="mode-indicator-view">
            <span id="form-mode-icon">‚óè</span> <span id="form-mode-text">Modo de Visualiza√ß√£o</span>
        </span>
    </div>

    <form id="perfil-form">
        <fieldset id="form-fieldset" disabled>
            
            <!-- SE√á√ÉO 1: DADOS B√ÅSICOS -->
            <div class="profile-section">
                <h4 class="section-title">Dados Pessoais</h4>
                
                <div class="form-row">
                    <div class="form-group" style="flex: 2;">
                        <label for="nome">Nome de Exibi√ß√£o *</label>
                        <input type="text" id="nome" name="nome" required placeholder="Seu nome como aparecer√° no perfil">
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label for="crp">N√∫mero do CRP *</label>
                        <input type="text" id="crp" name="crp" required placeholder="00/00000">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">E-mail de Acesso *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="telefone">WhatsApp Profissional *</label>
                        <input type="tel" id="telefone" name="telefone" inputmode="numeric" placeholder="(00) 00000-0000" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="cpf" id="label-documento">CPF / CNPJ *</label>
                        <input type="text" id="cpf" name="cpf" required placeholder="Apenas n√∫meros" inputmode="numeric">
                        <small id="cpf-feedback" style="color: #e63946; display: none; margin-top: 5px;">Documento inv√°lido</small>
                    </div>
                    <div class="form-group hidden" id="group-razao-social">
                        <label for="razao_social">Raz√£o Social</label>
                        <input type="text" id="razao_social" name="razao_social" placeholder="Nome da empresa">
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 2: ENDERE√áO -->
            <div class="profile-section">
                <h4 class="section-title">Localiza√ß√£o</h4>
                <div class="form-row">
                    <div class="form-group" style="flex: 1;">
                        <label for="cep">CEP *</label>
                        <div style="position: relative;">
                            <input type="text" id="cep" name="cep" placeholder="00000-000" maxlength="9" required>
                            <div id="cep-loading" style="display:none; position:absolute; right:10px; top:12px; color:#1B4332; font-size:0.8rem; font-weight:bold;">
                                ‚è≥
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="flex: 2;">
                        <label>Cidade *</label>
                        <input type="text" id="cidade" name="cidade" readonly style="background-color: #f0f2f5; cursor: not-allowed; border-color: transparent;" required>
                    </div>
                    <div class="form-group" style="flex: 0.5;">
                        <label>UF *</label>
                        <input type="text" id="estado" name="estado" readonly style="background-color: #f0f2f5; cursor: not-allowed; border-color: transparent;" required>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 3: PERFIL PROFISSIONAL -->
            <div class="profile-section">
                <h4 class="section-title">Detalhes Profissionais</h4>
                
                <div class="form-group highlight-box">
                    <label for="slug" style="color: #1B4332;">üîó Link do seu Perfil (Personaliz√°vel) *</label>
                    <div class="input-prefix-group" style="background: #fff;">
                        <span class="prefix">yelopsi.com.br/</span>
                        <input type="text" id="slug" name="slug" placeholder="seu-nome" pattern="[a-z0-9\-]+" title="Use apenas letras min√∫sculas, n√∫meros e h√≠fen" style="font-weight: bold; color: #1B4332;" required>
                    </div>
                    <small style="color: #666; font-size: 0.8rem; margin-top: 5px; display: block;">Este √© o link que voc√™ enviar√° para seus pacientes.</small>
                </div>

                <div class="form-group">
                    <label for="bio">Biografia / Sobre Mim *</label>
                    <div style="background: #fffbeb; border: 1px solid #fcd34d; color: #92400e; padding: 10px; border-radius: 8px; font-size: 0.85rem; margin-bottom: 10px;">
                        <strong>üí° Dica:</strong> As primeiras linhas do seu texto aparecer√£o no card de resultados. Capriche no in√≠cio para causar uma √≥tima primeira impress√£o!
                    </div>
                    <textarea id="bio" name="bio" rows="6" placeholder="Escreva um texto acolhedor contando sua experi√™ncia, abordagem e como voc√™ pode ajudar o paciente..." required></textarea>
                    <div style="text-align: right; font-size: 0.8rem; color: #999; margin-top: 5px;">Recomendado: 300-500 caracteres</div>
                </div>

                <div class="form-group" style="max-width: 200px;">
                    <label for="valor_sessao_numero">Valor da Sess√£o *</label>
                    <div class="input-prefix-group">
                        <span class="prefix">R$</span>
                        <input type="number" id="valor_sessao_numero" name="valor_sessao_numero" step="0.01" placeholder="0,00" required>
                    </div>
                </div>
            </div>
            
            <!-- SE√á√ÉO 4: REDES SOCIAIS (GRID) -->
            <div class="profile-section">
                <h4 class="section-title">Redes Sociais</h4>
                <div class="social-grid">
                    <div class="form-group">
                        <label>Instagram</label>
                        <div class="input-prefix-group"><span class="prefix">@</span><input type="text" id="instagram_url" name="instagram_url" placeholder="usuario"></div>
                    </div>
                    <div class="form-group">
                        <label>LinkedIn</label>
                        <div class="input-prefix-group"><span class="prefix">in/</span><input type="text" id="linkedin_url" name="linkedin_url" placeholder="usuario"></div>
                    </div>
                    <div class="form-group">
                        <label>TikTok</label>
                        <div class="input-prefix-group"><span class="prefix">@</span><input type="text" id="tiktok_url" name="tiktok_url" placeholder="usuario"></div>
                    </div>
                    <div class="form-group">
                        <label>Facebook</label>
                        <div class="input-prefix-group"><span class="prefix">/</span><input type="text" id="facebook_url" name="facebook_url" placeholder="usuario"></div>
                    </div>
                    <div class="form-group">
                        <label>X (Twitter)</label>
                        <div class="input-prefix-group"><span class="prefix">@</span><input type="text" id="x_url" name="x_url" placeholder="usuario"></div>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 5: ESPECIALIDADES (Multiselects) -->
            <div class="profile-section">
                <h4 class="section-title">Especialidades e Atua√ß√£o</h4>
                
            <div class="form-group">
                <label>Temas de Atua√ß√£o *</label>
                <div class="multiselect-tag disabled" id="temas_atuacao_multiselect">
                    <div class="multiselect-display"></div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Ansiedade">Ansiedade</div>
                        <div class="option" data-value="Estresse">Estresse</div>
                        <div class="option" data-value="Depress√£o">Depress√£o</div>
                        <div class="option" data-value="Relacionamentos">Relacionamentos</div>
                        <div class="option" data-value="Carreira">Carreira</div>
                        <div class="option" data-value="Autoestima">Autoestima</div>
                        <div class="option" data-value="Luto">Luto</div>
                        <div class="option" data-value="Traumas">Traumas</div>
                        <div class="option" data-value="TDAH">TDAH</div>
                    </div>
                </div>
            </div>

            <!-- NOVOS CAMPOS PARA MELHORAR O MATCH -->
            <div class="form-group">
                <label>P√∫blico-Alvo Principal *</label>
                <div class="multiselect-tag disabled" id="publico_alvo_multiselect">
                    <div class="multiselect-display"></div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Adolescentes">Adolescentes (18+)</div>
                        <div class="option" data-value="Adultos">Adultos</div>
                        <div class="option" data-value="Idosos">Idosos</div>
                        <div class="option" data-value="Casais">Casais</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Estilo de Terapia (Como voc√™ se descreve para o paciente?) *</label>
                <div class="multiselect-tag disabled" id="estilo_terapia_multiselect">
                    <div class="multiselect-display"></div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Um espa√ßo de escuta e acolhimento para me encontrar">Escuta e acolhimento</div>
                        <div class="option" data-value="Ferramentas e tarefas pr√°ticas para aplicar no dia a dia">Foco em ferramentas pr√°ticas</div>
                        <div class="option" data-value="Entender meu passado e a raiz das minhas emo√ß√µes">An√°lise do passado e ra√≠zes</div>
                        <div class="option" data-value="Focar em solu√ß√µes para problemas espec√≠ficos">Foco em solu√ß√µes espec√≠ficas</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Identificadores e Pr√°ticas Inclusivas *</label>
                <div class="multiselect-tag disabled" id="praticas_inclusivas_multiselect">
                    <div class="multiselect-display"></div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Que fa√ßa parte da comunidade LGBTQIAPN+">Fa√ßo parte da comunidade LGBTQIAPN+</div>
                        <div class="option" data-value="Que seja uma pessoa n√£o-branca (racializada) / pr√°tica antirracista">Sou uma pessoa n√£o-branca / Pr√°tica antirracista</div>
                        <div class="option" data-value="Que tenha uma perspectiva feminista">Tenho uma perspectiva feminista</div>
                        <div class="option" data-value="Que entenda de neurodiversidade (TDAH, Autismo, etc.)">Entendo de neurodiversidade (TDAH, Autismo, etc.)</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Abordagens e T√©cnicas *</label>
                <div class="multiselect-tag disabled" id="abordagens_tecnicas_multiselect" data-single-select="true">
                    <div class="multiselect-display"></div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Psican√°lise">Psican√°lise</div>
                        <div class="option" data-value="TCC">TCC</div>
                        <div class="option" data-value="Humanista">Humanista</div>
                        <div class="option" data-value="Gestalt-terapia">Gestalt-terapia</div>
                        <div class="option" data-value="Sist√™mica">Sist√™mica</div>
                        <div class="option" data-value="Jungiana">Jungiana</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>G√™nero de Identidade *</label>
                <div class="multiselect-tag disabled" id="genero_identidade_multiselect" data-single-select="true">
                    <div class="multiselect-display"></div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Feminino">Feminino</div>
                        <div class="option" data-value="Masculino">Masculino</div>
                        <div class="option" data-value="N√£o-bin√°rio">N√£o-bin√°rio</div>
                        <div class="option" data-value="Outro">Outro</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Modalidade de Atendimento *</label>
                <div class="multiselect-tag disabled" id="modalidade_atendimento_multiselect" data-input-id="modalidade_input">
                    <div class="multiselect-display">Selecionar...</div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Online">Online</div>
                        <div class="option" data-value="Presencial">Presencial</div>
                    </div>
                    <input type="hidden" id="modalidade_input" name="modalidade">
                </div>
            </div>

            <div class="form-group">
                <label>Disponibilidade *</label>
                <div class="multiselect-tag disabled" id="disponibilidade_periodo_multiselect">
                    <div class="multiselect-display"></div>
                    <div class="multiselect-options">
                        <div class="option" data-value="Manh√£">Manh√£</div>
                        <div class="option" data-value="Tarde">Tarde</div>
                        <div class="option" data-value="Noite">Noite</div>
                    </div>
                </div>
            </div>
            </div>

        </fieldset>
        <div class="form-actions">
            <button type="button" id="btn-alterar" class="btn btn-principal">Alterar Dados</button>
            <button type="submit" id="btn-salvar" class="btn btn-principal hidden">Salvar Altera√ß√µes</button>
        </div>
    </form>
</div>

<div class="widget" style="margin-top: 20px;">
    <h3>Alterar Senha</h3>
    <form id="password-form">
        <div class="form-group">
            <label for="senha_atual">Senha Atual</label>
            <input type="password" id="senha_atual" name="senha_atual" required autocomplete="current-password">
        </div>
        <div class="form-group">
            <label for="nova_senha">Nova Senha</label>
            <input type="password" id="nova_senha" name="nova_senha" required autocomplete="new-password">
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-primario">Alterar Senha</button>
        </div>
    </form>
</div>

<div class="widget" style="margin-top: 20px;">
    <h3>Excluir Conta</h3>
    <p>Esta a√ß√£o √© irrevers√≠vel e remover√° todos os seus dados da plataforma.</p>
    <a id="btn-excluir-conta" href="psi_excluir_conta.html">Excluir Minha Conta</a>
</div>