<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Manifesto Yelo | Sua dor n√£o precisa de mais ru√≠do</title>
    <meta name="description" content="A Yelo √© mais que um marketplace. Somos um ecossistema de sustenta√ß√£o da carreira cl√≠nica, oferecendo fluxo de pacientes, supervis√£o e uma comunidade segura.">
    <%- include('partials/head') %>
</head>
<body class="pagina-com-conteudo-atras">
    <style>
        /* Estilos Org√¢nicos para a p√°gina Sobre */
        .card-manifesto {
            background: transparent;
            padding: 60px 50px;
            position: relative;
            z-index: 2;
        }
        
        .doodle-bg {
            position: absolute;
            opacity: 0.4;
            pointer-events: none;
            z-index: 1;
            color: #f0f0f0;
        }
        .doodle-bg.left { top: 10%; left: -50px; width: 300px; transform: rotate(45deg); }
        .doodle-bg.right { bottom: 10%; right: -50px; width: 250px; transform: rotate(-45deg); }
        .doodle-bg.top-right { top: 5%; right: -30px; width: 180px; transform: rotate(120deg); opacity: 0.3; }
        .doodle-bg.bottom-left { bottom: 5%; left: -40px; width: 220px; transform: rotate(-15deg); opacity: 0.3; }

        /* --- LIVING GRID (GRADE VIVA) --- */
        .living-grid-section {
            padding: 80px 0;
            background-color: #fdfaf6;
            position: relative;
        }
        
        .living-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 10px;
            max-width: 1200px;
            margin: 0 auto;
            margin-bottom: 60px;
            padding: 0 20px;
        }
        
        /* Ajuste para telas maiores para n√£o ficar muito espa√ßado */
        @media (min-width: 1200px) {
             .living-grid { grid-template-columns: repeat(12, 1fr); }
        }
        
        /* Avatares */
        .grid-cell {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 12px 20px 12px 20px; /* Borda org√¢nica reduzida */
            overflow: hidden;
            position: relative;
            background-color: #e0e0e0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .grid-cell img, .grid-cell .psy-avatar-placeholder {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 1.5s ease-in-out;
        }
        
        .psy-avatar-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
            background-color: #1B4332; /* Fallback color */
        }

        .fade-enter { opacity: 0; z-index: 2; }
        .fade-enter-active { opacity: 1; }
        .fade-exit { opacity: 1; z-index: 1; }
        .fade-exit-active { opacity: 0; }

        @media (max-width: 900px) {
            .living-grid { grid-template-columns: repeat(8, 1fr); }
        }

        @media (max-width: 600px) {
            .card-manifesto { padding: 40px 25px; }
            .living-grid { grid-template-columns: repeat(6, 1fr); gap: 5px; }
            .grid-cell { border-radius: 8px 15px 8px 15px; }
            /* Limita a 4 linhas no mobile (6 colunas * 4 linhas = 24 itens) */
            .grid-cell:nth-child(n+25) { display: none; }
        }
    </style>

    <%- include('partials/header') %>

    <main>
        <!-- HERO MANIFESTO -->
        <section class="manifesto-hero">
            <div class="container-manifesto">
                <br>
                <h1 style="margin-bottom: 0;">Manifesto da Yelo</h1>
            </div>
            
            <div class="wave-divider-bottom" style="position: absolute; bottom: -1px; left: 0; width: 100%; line-height: 0;">
                <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" style="display: block; width: 100%; height: 60px; transform: scaleY(-1);">
                    <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" style="fill:#ffffff;"></path>
                </svg>
            </div>
        </section>

        <!-- CONTE√öDO DO MANIFESTO -->
        <section class="manifesto-body-section" style="background-color: #ffffff; position: relative; overflow: hidden;">
            <svg class="doodle-bg left" viewBox="0 0 200 200" fill="currentColor"><path d="M45.7,-76.3C58.9,-69.3,69.1,-55.6,76.3,-41.2C83.5,-26.8,87.7,-11.7,85.6,2.6C83.5,16.9,75.1,30.4,65.6,42.2C56.1,54,45.5,64.1,33.3,70.3C21.1,76.5,7.3,78.8,-5.3,76.9C-17.9,75,-34.7,68.9,-48.6,59.6C-62.5,50.3,-73.5,37.8,-79.6,23.3C-85.7,8.8,-86.9,-7.7,-80.7,-21.8C-74.5,-35.9,-60.9,-47.6,-46.8,-54.3C-32.7,-61,-18.1,-62.7,-2.9,-62.2C12.3,-61.7,24.6,-59,32.5,-83.3L45.7,-76.3Z" transform="translate(100 100)" /></svg>
            <svg class="doodle-bg right" viewBox="0 0 200 200" fill="currentColor"><path d="M38.1,-63.8C49.3,-54.6,58.3,-43.3,65.5,-30.8C72.7,-18.3,78.1,-4.6,76.3,8.3C74.5,21.2,65.5,33.3,55.3,43.4C45.1,53.5,33.7,61.6,21.1,66.1C8.5,70.6,-5.3,71.5,-18.4,67.8C-31.5,64.1,-43.9,55.8,-53.4,45.2C-62.9,34.6,-69.5,21.7,-70.8,8.2C-72.1,-5.3,-68.1,-19.4,-59.6,-31.1C-51.1,-42.8,-38.1,-52.1,-25.3,-60.1C-12.5,-68.1,0.1,-74.8,12.7,-74.8C25.3,-74.8,38.1,-68.1,38.1,-63.8Z" transform="translate(100 100)" /></svg>
            <svg class="doodle-bg top-right" viewBox="0 0 200 200" fill="currentColor"><path d="M41.3,-70.5C54.4,-63.9,66.4,-55.4,75.2,-44.3C84,-33.2,89.6,-19.6,88.6,-6.4C87.6,6.8,80,19.6,71.5,31.1C63,42.6,53.6,52.8,42.5,60.8C31.4,68.8,18.6,74.6,5.2,75.5C-8.2,76.4,-21.8,72.4,-34.3,65.6C-46.8,58.8,-58.2,49.2,-66.8,37.4C-75.4,25.6,-81.2,11.6,-80.6,-2.1C-80,-15.8,-73,-29.2,-63.6,-40.2C-54.2,-51.2,-42.4,-59.8,-30.1,-66.9C-17.8,-74,-5,-79.6,6.9,-78.4C18.8,-77.2,37.6,-69.2,41.3,-70.5Z" transform="translate(100 100)" /></svg>
            <svg class="doodle-bg bottom-left" viewBox="0 0 200 200" fill="currentColor"><path d="M44.7,-76.4C58.9,-69.2,71.8,-59.1,81.6,-46.6C91.4,-34.1,98.1,-19.2,96.8,-4.8C95.5,9.6,86.3,23.5,76.4,36.4C66.5,49.5,56,61.6,43.5,69.9C31,78.2,16.5,82.7,1.5,80.1C-13.5,77.5,-29,67.8,-42.6,58.4C-56.2,49,-67.9,39.9,-75.8,28.1C-83.7,16.3,-87.8,1.8,-85.4,-11.8C-83,-25.4,-74.1,-38.1,-63.4,-48.6C-52.7,-59.1,-40.2,-67.4,-27.2,-75.4C-14.2,-83.4,-0.7,-91.1,12.5,-90.1C25.7,-89.1,51.4,-79.4,44.7,-76.4Z" transform="translate(100 100)" /></svg>

            <div class="container-manifesto">
                <h2 class="titulo-secao" style="text-align: center; margin-bottom: 40px; color: #1B4332;">Sua dor n√£o precisa de mais ru√≠do.</h2>
                
                <div class="card-manifesto">
                
                <div class="manifesto-content-flow">
                    <p>O mundo l√° fora j√° √© barulhento demais. Cheio de press√µes, julgamentos e telas que nunca desligam. Quando a mente pede socorro, a √∫ltima coisa que voc√™ precisa √© de um sistema complicado ou de uma busca fria e solit√°ria.</p>

                    <div class="flow-divider"></div>

                    <p>A Yelo nasceu para ser o sil√™ncio no meio do caos. O primeiro passo seguro em dire√ß√£o a voc√™ mesmo.</p>

                    <p>N√≥s n√£o conectamos apenas "pacientes" a "doutores". N√≥s conectamos hist√≥rias que precisam ser contadas a ouvidos preparados para escutar.</p>

                    <div class="flow-divider"></div>

                    <p>Criamos um espa√ßo digital pensado na sua m√£o, no seu tempo e no seu ritmo. Sem burocracia. Sem tecnic√™s. Apenas conex√£o.</p>

                    <p>Porque buscar ajuda √© um ato de coragem. E a sua coragem merece ser recebida com gentileza.</p>

                    <p class="highlight-text">Voc√™ n√£o est√° quebrado. Voc√™ s√≥ precisa do lugar certo para se reconstruir.</p>
                    
                    <div class="manifesto-signature">
                        <span class="signature-text">Com carinho üíö</span>
                        <span class="signature-name">Equipe Yelo</span>
                    </div>
                </div>
                </div>

            </div>
            
            <div class="wave-divider-bottom" style="position: absolute; bottom: -1px; left: 0; width: 100%; line-height: 0;">
                <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" style="display: block; width: 100%; height: 60px; transform: scaleY(-1);">
                    <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" style="fill:#fdfaf6;"></path>
                </svg>
            </div>
        </section>

        <!-- SE√á√ÉO ROSTOS DA YELO (LIVING GRID) -->
        <section class="living-grid-section">
            <div class="container" style="text-align: center; margin-bottom: 40px;">
                <h2 class="titulo-secao">Rostos de quem faz a Yelo</h2>
                <p class="subtitulo-secao">Conhe√ßa alguns dos profissionais que est√£o prontos para te acolher.</p>
            </div>

            <div class="living-grid" id="living-grid">
                <!-- Grid injetado via JS -->
            </div>

            <div style="text-align: center; margin-top: 40px;">
                <a href="/questionario.html" class="btn-cta-principal">Encontrar meu terapeuta</a>
            </div>
        </section>
    </main>

    <%- include('partials/footer') %>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const gridContainer = document.getElementById('living-grid');
            const GRID_SIZE = 60; // Aumentado para compensar o tamanho menor das c√©lulas
            
            // Cores da marca para placeholders
            const brandColors = ['#1B4332', '#FFEE8C', '#2D6A4F', '#F4D35E'];
            
            // Banco de imagens para fallback (Diversidade)
            const stockImages = [
                "https://images.pexels.com/photos/1729931/pexels-photo-1729931.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/927022/pexels-photo-927022.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/3769021/pexels-photo-3769021.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/1121796/pexels-photo-1121796.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/762020/pexels-photo-762020.jpeg?auto=compress&cs=tinysrgb&w=200",
                "https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?auto=compress&cs=tinysrgb&w=200"
            ];

            // 1. Buscar dados do Backend
            let professionals = [];
            try {
                const response = await fetch('/api/public/psychologists/list');
                if (response.ok) {
                    professionals = await response.json();
                }
            } catch (error) {
                console.warn('Erro ao carregar psic√≥logos, usando mocks.', error);
            }

            // Preenche fotos de profissionais sem imagem com fotos do banco
            professionals.forEach(p => {
                if (!p.fotoUrl) {
                    p.fotoUrl = stockImages[Math.floor(Math.random() * stockImages.length)];
                }
            });

            // 2. L√≥gica de Fallback / Preenchimento (Mocks)
            // "dando preferencia, mas n√£o somente de pessoas pretas e pardas"
            // Usamos fotos do banco de imagens para simular.
            while (professionals.length < 100) { // Garante um pool grande
                professionals.push({
                    id: 'mock-' + Math.random(),
                    isMock: true,
                    fotoUrl: stockImages[Math.floor(Math.random() * stockImages.length)],
                    initial: 'Y'
                });
            }

            // Embaralha para dar dinamismo
            professionals.sort(() => Math.random() - 0.5);

            // 3. Renderiza√ß√£o Inicial do Grid
            const displayedItems = professionals.slice(0, GRID_SIZE);

            const createContent = (psi) => {
                let element;
                
                if (psi.fotoUrl) {
                    element = document.createElement('img');
                    element.src = psi.fotoUrl;
                    element.alt = psi.nome || 'Psic√≥logo Yelo';
                } else {
                    element = document.createElement('div');
                    element.className = 'psy-avatar-placeholder';
                    element.style.backgroundColor = psi.color || '#1B4332';
                    element.textContent = psi.initial || 'Y';
                    if(psi.color === '#FFEE8C' || psi.color === '#F4D35E') element.style.color = '#1B4332';
                }
                return element;
            };

            displayedItems.forEach(item => {
                const cell = document.createElement('div');
                cell.className = 'grid-cell';
                cell.appendChild(createContent(item));
                gridContainer.appendChild(cell);
            });

            // 4. L√≥gica de "Living Grid" (Troca aleat√≥ria)
            setInterval(() => {
                // Escolhe uma c√©lula aleat√≥ria do grid
                const cells = gridContainer.children;
                if (cells.length === 0) return;
                
                const randomCellIndex = Math.floor(Math.random() * cells.length);
                const cell = cells[randomCellIndex];

                // Escolhe um item aleat√≥rio de TODOS os profissionais
                const randomProIndex = Math.floor(Math.random() * professionals.length);
                const newItem = professionals[randomProIndex];
                
                const newContent = createContent(newItem);
                newContent.classList.add('fade-enter');
                
                // Adiciona o novo conte√∫do
                cell.appendChild(newContent);
                
                // For√ßa reflow para ativar transi√ß√£o
                void newContent.offsetWidth;
                
                newContent.classList.add('fade-enter-active');
                newContent.classList.remove('fade-enter');

                // Remove o conte√∫do antigo
                const oldContent = cell.firstElementChild;
                if (oldContent) {
                    oldContent.classList.add('fade-exit');
                    // Espera a transi√ß√£o acabar para remover do DOM
                    setTimeout(() => {
                        if(oldContent.parentNode === cell) {
                            cell.removeChild(oldContent);
                        }
                    }, 1500); // Mesmo tempo do CSS transition
                }

            }, 2000); // Troca uma imagem a cada 2 segundos
        });
    </script>
</body>
</html>