<style>
    /* Garante fonte Lato para elementos dinâmicos (Olá [nome], Botões) igual aos links */
    header .botoes-acao, header .botoes-acao *, header .btn, header .user-welcome-text {
        font-family: var(--font-principal) !important;
        font-size: 18px !important;
    }

    /* Ajuste para área do usuário logado (Desktop) */
    .user-logged-area {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-left: 20px;
    }
    
    header.header-rolagem .user-welcome-text {
        color: #333 !important;
    }

    /* --- BOTTOM NAVIGATION BAR (MOBILE UX) --- */
    .bottom-nav {
        display: none; /* Oculto no Desktop */
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 65px;
        background-color: #ffffff;
        /* Substitui box-shadow por drop-shadow para contornar a wave */
        filter: drop-shadow(0 -5px 15px rgba(0,0,0,0.08));
        z-index: 9999;
        justify-content: space-around;
        align-items: center;
        padding-bottom: env(safe-area-inset-bottom); /* Ajuste para iPhone X+ */
    }

    .bottom-nav-wave {
        position: absolute;
        bottom: 100%; /* Fica exatamente acima da barra */
        left: 0;
        width: 100%;
        height: 25px; /* Altura da onda */
        overflow: hidden;
        line-height: 0;
        pointer-events: none;
    }
    
    .bottom-nav-wave svg {
        position: relative;
        display: block;
        width: calc(100% + 1.3px);
        height: 100%;
        fill: #ffffff;
    }

    .bottom-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: #999;
        font-family: var(--font-principal, sans-serif);
        font-size: 10px;
        font-weight: 500;
        flex: 1;
        height: 100%;
        background: none;
        border: none;
        cursor: pointer;
        padding: 5px 0 0 0;
        transition: color 0.2s ease;
    }

    .bottom-nav-item svg {
        width: 24px;
        height: 24px;
        margin-bottom: 4px;
        fill: none;
        stroke: currentColor;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
        transition: stroke 0.2s ease;
    }

    .bottom-nav-item.active {
        color: var(--verde-escuro, #1B4332);
    }
    
    .bottom-nav-item.active svg {
        stroke: var(--verde-escuro, #1B4332);
        fill: rgba(27, 67, 50, 0.1); /* Preenchimento sutil no ativo */
    }

    /* Ajustes de Responsividade */
    @media (max-width: 992px) {
        .menu-hamburguer {
            display: none !important; /* Substitui o menu hambúrguer antigo */
        }
        .bottom-nav {
            display: flex; /* Mostra a barra inferior */
        }
        body {
            padding-bottom: 100px; /* Garante que o conteúdo não fique escondido atrás da barra */
        }
        /* Ajuste para o menu "Mais" (container-navegacao) não cobrir a barra se for fixed */
        .container-navegacao.ativo {
            padding-bottom: 80px;
        }

        /* --- MOBILE TOP LINKS (HEADER) --- */
        .mobile-top-links {
            display: none;
        }
        @media (max-width: 992px) {
            .mobile-top-links {
                display: flex;
                gap: 15px;
                margin-left: auto; /* Empurra para a direita */
                align-items: center;
            }
            .mobile-top-links a {
                text-decoration: none;
                color: #ffffff;
                font-size: 14px;
                font-weight: 600;
                font-family: var(--font-principal, sans-serif);
                transition: color 0.3s ease;
            }
            header.header-rolagem .mobile-top-links a {
                color: var(--verde-escuro, #1B4332);
            }
        }
    }
</style>
<header>
    <a href="/" class="logo">
        <img src="/assets/logos/logo-branca.png" alt="Logo da Yelo" class="logo-branca">
        
        <img src="/assets/logos/logo-escura.png" alt="Logo da Yelo" class="logo-escura">
    </a>

    <!-- Links Mobile Topo -->
    <div class="mobile-top-links">
        <a href="/sobre">Sobre</a>
        <a href="/faq">FAQ</a>
        <a href="/blog">Blog</a>
    </div>

    <button class="menu-hamburguer" aria-label="Abrir menu">
        <div class="barra"></div>
        <div class="barra"></div>
        <div class="barra"></div>
    </button>

    <div class="container-navegacao">
        <nav>
            <ul>
                <li><a href="/">Início</a></li>
                <li><a href="/sobre">Sobre</a></li>
                <li><a href="/comunidade">Para Comunidade</a></li>
                <li><a href="/profissionais">Para Profissionais</a></li>
                <li><a href="/faq">FAQ</a></li>
                <li><a href="/blog">Blog</a></li>
            </ul>
        </nav>
        
        <!-- Botões para Visitantes -->
        <div class="botoes-acao" id="guest-actions">
            <a href="/login" class="btn btn-outline">Entrar</a>
            <a href="/cadastro" class="btn btn-solid">Registrar</a>
        </div>

        <!-- Área do Usuário Logado (Oculto por padrão) -->
        <div class="user-logged-area" id="user-logged-actions" style="display: none;">
            <span class="user-welcome-text" style="color: inherit;">Olá, <span id="header-username">Visitante</span></span>
            <a href="#" id="header-dashboard-btn" class="btn btn-solid">Meu Painel</a>
        </div>
    </div>
</header>

<!-- Bottom Navigation Bar HTML -->
<nav class="bottom-nav">
    <div class="bottom-nav-wave">
        <svg viewBox="0 0 1440 320" preserveAspectRatio="none">
            <path d="M0,320L48,304C96,288,192,256,288,245.3C384,235,480,245,576,240C672,235,768,213,864,213.3C960,213,1056,235,1152,245.3C1248,256,1344,256,1392,256L1440,256L1440,320L1392,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path>
        </svg>
    </div>

    <a href="/" class="bottom-nav-item" id="nav-home">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" /></svg>
        <span>Início</span>
    </a>
    
    <a href="/comunidade" class="bottom-nav-item" id="nav-community">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" /></svg>
        <span>Comunidade</span>
    </a>

    <a href="/questionario.html" class="bottom-nav-item" id="nav-start">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z" /></svg>
        <span>Começar</span>
    </a>

    <a href="/profissionais" class="bottom-nav-item" id="nav-pro">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 00.75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 00-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0112 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 01-.673-.38m0 0A2.18 2.18 0 013 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 013.413-.387m7.5 0V5.25A2.25 2.25 0 0013.5 3h-3a2.25 2.25 0 00-2.25 2.25v.894m7.5 0a48.667 48.667 0 00-7.5 0M12 12.75h.008v.008H12v-.008z" /></svg>
        <span>Para Psis</span>
    </a>

    <a href="/login" class="bottom-nav-item" id="nav-profile">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
        <span id="nav-profile-text">Entrar</span>
    </a>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const menuBtn = document.querySelector('.menu-hamburguer');
        const navContainer = document.querySelector('.container-navegacao');
        
        if(menuBtn && navContainer) {
            menuBtn.addEventListener('click', () => {
                navContainer.classList.toggle('ativo');
                // Opcional: Alternar ícone ou animar as barras aqui
            });
        }

        // --- LÓGICA DE USUÁRIO LOGADO ---
        const token = localStorage.getItem('Yelo_token');
        const userName = localStorage.getItem('Yelo_user_name');
        const userType = localStorage.getItem('Yelo_user_type'); // 'patient', 'psychologist', 'admin'

        if (token && userName) {
            // 1. Esconde botões de login/registro
            const guestDiv = document.getElementById('guest-actions');
            if (guestDiv) guestDiv.style.display = 'none';

            // 2. Mostra área do usuário
            const userDiv = document.getElementById('user-logged-actions');
            const nameSpan = document.getElementById('header-username');
            const dashBtn = document.getElementById('header-dashboard-btn');

            if (userDiv) userDiv.style.display = 'flex';
            if (nameSpan) nameSpan.textContent = userName.split(' ')[0]; // Apenas o primeiro nome
            
            if (dashBtn) {
                if (userType === 'admin') dashBtn.href = '/admin';
                else if (userType === 'psychologist') dashBtn.href = '/psi/psi_dashboard.html';
                else dashBtn.href = '/patient/patient_dashboard'; // Default para paciente

                // Atualiza link da Bottom Nav para o Dashboard
                const navProfile = document.getElementById('nav-profile');
                const navProfileText = document.getElementById('nav-profile-text');
                if(navProfile) {
                    navProfile.href = dashBtn.href;
                    navProfile.classList.add('logged-in');
                }
                if(navProfileText) navProfileText.textContent = 'Conta';
            }
        }

        // --- ACTIVE STATE DA BOTTOM NAV ---
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.bottom-nav-item');
        navLinks.forEach(link => {
            const href = link.getAttribute('href');
            // Verifica correspondência exata ou se é uma sub-rota (exceto home)
            if(href && (href === currentPath || (href !== '/' && currentPath.startsWith(href)))) {
                link.classList.add('active');
            }
        });
    });
</script>