<style>
    /* Garante fonte Lato para elementos dinâmicos (Olá [nome], Botões) igual aos links */
    header .botoes-acao, header .botoes-acao *, header .btn, header .user-welcome-text {
        font-family: var(--font-principal) !important;
        font-size: 18px !important;
    }

    /* Ajuste para área do usuário logado (Desktop) */
    .user-logged-area {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-left: 20px;
    }
    
    header.header-rolagem .user-welcome-text {
        color: #333 !important;
    }

    /* --- BOTTOM NAVIGATION BAR (MOBILE UX) --- */
    .bottom-nav {
        display: none; /* Oculto no Desktop */
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 65px;
        background-color: #ffffff;
        box-shadow: 0 -4px 20px rgba(0,0,0,0.08);
        z-index: 9999;
        justify-content: space-around;
        align-items: center;
        padding-bottom: env(safe-area-inset-bottom); /* Ajuste para iPhone X+ */
        border-top: 1px solid #f0f0f0;
    }

    .bottom-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: #999;
        font-family: var(--font-principal, sans-serif);
        font-size: 10px;
        font-weight: 500;
        flex: 1;
        height: 100%;
        background: none;
        border: none;
        cursor: pointer;
        padding: 5px 0 0 0;
        transition: color 0.2s ease;
    }

    .bottom-nav-item svg {
        width: 24px;
        height: 24px;
        margin-bottom: 4px;
        fill: none;
        stroke: currentColor;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
        transition: stroke 0.2s ease;
    }

    .bottom-nav-item.active {
        color: var(--verde-escuro, #1B4332);
    }
    
    .bottom-nav-item.active svg {
        stroke: var(--verde-escuro, #1B4332);
        fill: rgba(27, 67, 50, 0.1); /* Preenchimento sutil no ativo */
    }

    /* Ajustes de Responsividade */
    @media (max-width: 992px) {
        .menu-hamburguer {
            display: none !important; /* Substitui o menu hambúrguer antigo */
        }
        .bottom-nav {
            display: flex; /* Mostra a barra inferior */
        }
        body {
            padding-bottom: 70px; /* Garante que o conteúdo não fique escondido atrás da barra */
        }
        /* Ajuste para o menu "Mais" (container-navegacao) não cobrir a barra se for fixed */
        .container-navegacao.ativo {
            padding-bottom: 80px;
        }
    }
</style>
<header>
    <a href="/" class="logo">
        <img src="/assets/logos/logo-branca.png" alt="Logo da Yelo" class="logo-branca">
        
        <img src="/assets/logos/logo-escura.png" alt="Logo da Yelo" class="logo-escura">
    </a>

    <button class="menu-hamburguer" aria-label="Abrir menu">
        <div class="barra"></div>
        <div class="barra"></div>
        <div class="barra"></div>
    </button>

    <div class="container-navegacao">
        <nav>
            <ul>
                <li><a href="/">Início</a></li>
                <li><a href="/sobre">Sobre</a></li>
                <li><a href="/comunidade">Para Comunidade</a></li>
                <li><a href="/profissionais">Para Profissionais</a></li>
                <li><a href="/faq">FAQ</a></li>
                <li><a href="/blog">Blog</a></li>
            </ul>
        </nav>
        
        <!-- Botões para Visitantes -->
        <div class="botoes-acao" id="guest-actions">
            <a href="/login" class="btn btn-outline">Entrar</a>
            <a href="/cadastro" class="btn btn-solid">Registrar</a>
        </div>

        <!-- Área do Usuário Logado (Oculto por padrão) -->
        <div class="user-logged-area" id="user-logged-actions" style="display: none;">
            <span class="user-welcome-text" style="color: inherit;">Olá, <span id="header-username">Visitante</span></span>
            <a href="#" id="header-dashboard-btn" class="btn btn-solid">Meu Painel</a>
        </div>
    </div>
</header>

<!-- Bottom Navigation Bar HTML -->
<nav class="bottom-nav">
    <a href="/" class="bottom-nav-item" id="nav-home">
        <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        <span>Início</span>
    </a>
    
    <a href="/profissionais" class="bottom-nav-item" id="nav-search">
        <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <span>Buscar</span>
    </a>

    <a href="/blog" class="bottom-nav-item" id="nav-blog">
        <svg viewBox="0 0 24 24"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
        <span>Blog</span>
    </a>

    <a href="/login" class="bottom-nav-item" id="nav-profile">
        <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        <span id="nav-profile-text">Entrar</span>
    </a>

    <button class="bottom-nav-item" id="nav-menu-toggle">
        <svg viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
        <span>Menu</span>
    </button>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const menuBtn = document.querySelector('.menu-hamburguer');
        const navContainer = document.querySelector('.container-navegacao');
        
        if(menuBtn && navContainer) {
            menuBtn.addEventListener('click', () => {
                navContainer.classList.toggle('ativo');
                // Opcional: Alternar ícone ou animar as barras aqui
            });
        }

        // --- LÓGICA DA BOTTOM NAV ---
        const bottomMenuBtn = document.getElementById('nav-menu-toggle');
        if(bottomMenuBtn && navContainer) {
            bottomMenuBtn.addEventListener('click', () => {
                navContainer.classList.toggle('ativo');
            });
        }

        // --- LÓGICA DE USUÁRIO LOGADO ---
        const token = localStorage.getItem('Yelo_token');
        const userName = localStorage.getItem('Yelo_user_name');
        const userType = localStorage.getItem('Yelo_user_type'); // 'patient', 'psychologist', 'admin'

        if (token && userName) {
            // 1. Esconde botões de login/registro
            const guestDiv = document.getElementById('guest-actions');
            if (guestDiv) guestDiv.style.display = 'none';

            // 2. Mostra área do usuário
            const userDiv = document.getElementById('user-logged-actions');
            const nameSpan = document.getElementById('header-username');
            const dashBtn = document.getElementById('header-dashboard-btn');

            if (userDiv) userDiv.style.display = 'flex';
            if (nameSpan) nameSpan.textContent = userName.split(' ')[0]; // Apenas o primeiro nome
            
            if (dashBtn) {
                if (userType === 'admin') dashBtn.href = '/admin';
                else if (userType === 'psychologist') dashBtn.href = '/psi/psi_dashboard.html';
                else dashBtn.href = '/patient/patient_dashboard'; // Default para paciente

                // Atualiza link da Bottom Nav para o Dashboard
                const navProfile = document.getElementById('nav-profile');
                const navProfileText = document.getElementById('nav-profile-text');
                if(navProfile) {
                    navProfile.href = dashBtn.href;
                    navProfile.classList.add('logged-in');
                }
                if(navProfileText) navProfileText.textContent = 'Conta';
            }
        }

        // --- ACTIVE STATE DA BOTTOM NAV ---
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.bottom-nav-item');
        navLinks.forEach(link => {
            const href = link.getAttribute('href');
            // Verifica correspondência exata ou se é uma sub-rota (exceto home)
            if(href && (href === currentPath || (href !== '/' && currentPath.startsWith(href)))) {
                link.classList.add('active');
            }
        });
    });
</script>